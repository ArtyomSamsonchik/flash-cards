@use 'sass:selector';

@mixin flex($justify: center, $align: center, $direction: null, $wrap: null) {
  display: flex;
  flex-flow: $direction $wrap;
  align-items: $align;
  justify-content: $justify;
}

@mixin typography($size: null, $weight: null, $line-height: null) {
  margin: 0;

  @if $size {
    font-size: var(--font-size-#{$size});
  }

  @if $weight {
    font-weight: var(--font-weight-#{$weight});
  }

  @if $line-height {
    line-height: var(--line-height-#{$line-height});
  }
}

// TODO: add sass:map helper-function call to avoid an error when passing named args
// https://sass-lang.com/documentation/at-rules/mixin/#taking-arbitrary-keyword-arguments
@mixin card-container($isFlex: false, $flex-args...) {
  max-width: 420px;
  padding: 30px;

  @if $isFlex {
    @include flex($flex-args...);
  }
}

// Code used to reset user-agent styles applied to input with auto inserted credentials
// Mixin must be used inside a ruleset, not at the top level of the stylesheet.
@mixin reset-input-autofill(
  $bg-color,
  $text-color,
  $disabled-bg-color: $bg-color,
  $disabled-text-color: $text-color
) {
  $parent: selector.append(&, ':-webkit-autofill');
  $parent-disabled: selector.append(&, 'Disabled:-webkit-autofill');

  --text-color: #{$text-color};
  --bg-color: #{$bg-color};

  // prettier-ignore
  @at-root #{$parent, selector.append($parent, ':hover, :focus, :active')} {
    box-shadow: 0 0 0 4em var(--bg-color) inset !important;

    -webkit-text-fill-color: var(--text-color) !important;
  }

  @at-root #{$parent-disabled} {
    --text-color: #{$disabled-text-color};
    --bg-color: #{$disabled-bg-color};
  }
}

@mixin form-card($isFlex: false, $flex-args...) {
  .container {
    @include card-container($isFlex, $flex-args...);
  }

  .title {
    margin-bottom: 24px;
  }

  .form {
    @if $isFlex {
      width: 100%;
    }

    @include flex($justify: null, $direction: column);
  }

  .field {
    @if $isFlex {
      width: 100%;
    }

    margin-bottom: 10px;
  }

  .input {
    @include reset-input-autofill(
      $bg-color: var(--color-dark-700),
      $text-color: var(--color-light-100),
      $disabled-text-color: var(--color-dark-300)
    );
  }

  .button {
    margin-top: 24px;
  }

  .hint {
    margin-top: 20px;
    color: var(--color-light-900);
  }

  .signUpLink {
    @include typography($size: m, $weight: bold, $line-height: m);

    margin-top: 10px;
  }
}
